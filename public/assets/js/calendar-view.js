(()=>{document.addEventListener("DOMContentLoaded",function(){let N=document.querySelectorAll(".view-btn"),L=document.querySelector(".events-calendar-view"),D=document.querySelector(".events-list-view");if(!L||!D)return;let u=new Date,g=null,k=document.querySelectorAll(".event-card"),B=new Date;k.forEach(n=>{new Date(n.dataset.eventDate)<B&&n.classList.add("past-event")}),document.querySelectorAll(".event-card-date-badge").forEach(n=>{let e=n.dataset.date;if(e){let a=new Date(e),s=a.getDate(),y=a.toLocaleDateString("en-US",{month:"short"});n.querySelector(".event-day").textContent=s,n.querySelector(".event-month").textContent=y}}),N.forEach(n=>{n.addEventListener("click",function(){let e=this.dataset.view;N.forEach(a=>a.classList.remove("active")),this.classList.add("active"),e==="calendar"?(L.classList.add("active-view"),D.classList.remove("active-view")):(L.classList.remove("active-view"),D.classList.add("active-view"))})});let M=document.querySelector(".event-show-more");M&&M.addEventListener("click",function(){document.querySelectorAll(".event-card.hidden-event").forEach(e=>{e.classList.remove("hidden-event")}),this.style.display="none"});function H(){let n=document.querySelectorAll(".event-data-item");return Array.from(n).map(e=>({title:e.dataset.title,date:new Date(e.dataset.date),location:e.dataset.location,details:e.dataset.details}))}let A=H(),q=document.querySelector(".prev-month"),x=document.querySelector(".next-month");q&&q.addEventListener("click",()=>{u.setMonth(u.getMonth()-1),E()}),x&&x.addEventListener("click",()=>{u.setMonth(u.getMonth()+1),E()});function E(){let n=document.querySelector(".calendar-month-year"),e=document.querySelector(".calendar-grid");if(!n||!e)return;let a=u.getFullYear(),s=u.getMonth(),y=["January","February","March","April","May","June","July","August","September","October","November","December"];n.textContent=`${y[s]} ${a}`,e.innerHTML="",["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(o=>{let t=document.createElement("div");t.className="calendar-day-header",t.textContent=o,e.appendChild(t)});let p=new Date(a,s,1).getDay(),f=new Date(a,s+1,0).getDate();for(let o=0;o<p;o++){let t=document.createElement("div");t.className="calendar-day empty",e.appendChild(t)}for(let o=1;o<=f;o++){let t=document.createElement("div");t.className="calendar-day";let h=new Date(a,s,o),d=A.filter(c=>c.date.toDateString()===h.toDateString()),l=document.createElement("div");if(l.className="calendar-day-number",l.textContent=o,t.appendChild(l),d.length>0){t.classList.add("has-event");let c=document.createElement("div");c.className="calendar-day-events",d.forEach(T=>{let C=document.createElement("div");C.className="event-chip";let S=document.createElement("span");S.className="event-chip-time",S.textContent=b(T.date);let w=document.createElement("span");w.className="event-chip-title",w.textContent=T.title,C.appendChild(S),C.appendChild(w),c.appendChild(C)}),t.appendChild(c)}let i=new Date;i.setHours(0,0,0,0);let m=new Date(h);m.setHours(0,0,0,0),m.toDateString()===i.toDateString()&&t.classList.add("today"),m<i&&t.classList.add("past-day"),g&&h.toDateString()===g.toDateString()&&t.classList.add("selected"),t.addEventListener("click",()=>{d.length>0&&(g=h,E(),$(h,d))}),e.appendChild(t)}}function $(n,e){let a=document.getElementById("calendarModal");if(!a)return;let s={weekday:"long",year:"numeric",month:"long",day:"numeric"},y=n.toLocaleDateString("en-US",s),v=a.querySelector(".calendar-modal-body");if(!v)return;v.innerHTML="";let p=document.createElement("h2");p.className="modal-date-header",p.textContent=y,v.appendChild(p);let f=document.createElement("p");f.className="modal-event-count",f.textContent=`${e.length} Event${e.length>1?"s":""}`,v.appendChild(f);let o=document.createElement("div");o.className="modal-events-container",e.forEach((t,h)=>{let d=document.createElement("div");d.className="modal-event-card";let l=document.createElement("span"),i=document.createElement("p");i.className="modal-event-title",i.textContent=t.title,l.appendChild(i);let m=document.createElement("p");if(m.className="modal-event-time",m.innerHTML=`<strong>Time:</strong> ${b(t.date)}`,l.appendChild(m),t.location){let c=document.createElement("p");c.className="modal-event-location",c.innerHTML=`<strong>Location:</strong> ${t.location}`,l.appendChild(c)}if(d.appendChild(l),t.details){let c=document.createElement("div");c.className="modal-event-details",c.innerHTML=t.details,d.appendChild(c)}o.appendChild(d)}),v.appendChild(o),a.classList.add("active"),document.body.style.overflow="hidden"}let r=document.getElementById("calendarModal");if(r){let n=r.querySelector(".calendar-modal-close"),e=r.querySelector(".calendar-modal-overlay");n&&n.addEventListener("click",()=>{r.classList.remove("active"),document.body.style.overflow=""}),e&&e.addEventListener("click",()=>{r.classList.remove("active"),document.body.style.overflow=""}),document.addEventListener("keydown",a=>{a.key==="Escape"&&r.classList.contains("active")&&(r.classList.remove("active"),document.body.style.overflow="")})}function b(n){return n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}E()});})();
