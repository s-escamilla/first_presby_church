(()=>{var m=(function(){"use strict";let t={sessionKey:"adminSession",loginPath:"/admin/login/",dashboardPath:"/admin/dashboard/"};function o(){try{let n=localStorage.getItem(t.sessionKey);if(!n)return null;let e=JSON.parse(n);return e.expiresAt&&e.expiresAt<Date.now()?(r(),null):e}catch(n){return console.error("Error reading session:",n),null}}function s(){let n=o();return n!==null&&n.expiresAt>Date.now()}function c(){let n=o();return n?{username:n.username,name:n.name,loginTime:n.loginTime,expiresAt:n.expiresAt}:null}function r(){localStorage.removeItem(t.sessionKey)}function a(n=null){r();let e=new URL(t.loginPath,window.location.origin);n&&e.searchParams.set("redirect",n),window.location.href=e.toString()}function l(n=null){if(!s()){let e=n||window.location.pathname,i=new URL(t.loginPath,window.location.origin);return i.searchParams.set("redirect",e),window.location.href=i.toString(),!1}return!0}function d(){let n=o();n&&n.rememberMe&&(n.expiresAt=Date.now()+864e5,localStorage.setItem(t.sessionKey,JSON.stringify(n)))}function f(){let n=o();if(!n)return"Not logged in";let e=n.expiresAt-Date.now();if(e<0)return"Expired";let i=Math.floor(e/(1e3*60*60)),u=Math.floor(e%(1e3*60*60)/(1e3*60));return i>0?`${i}h ${u}m`:`${u}m`}function g(){["mousedown","keydown","scroll","touchstart"].forEach(e=>{document.addEventListener(e,()=>{d()},{passive:!0,once:!1})}),setInterval(()=>{s()||(alert("Your session has expired. Please login again."),a())},6e4)}return{getSession:o,isAuthenticated:s,getCurrentUser:c,logout:a,requireAuth:l,getTimeRemaining:f,init:g,clearSession:r}})();typeof window!="undefined"&&(window.AdminAuth=m);})();
